# Server knowledge
Здесь буду делать пометки и оставлять ссылки на разные интересные материалы, связанные с администрированием серверов и полезными для него прогами

## Траблшутинг на серверах Linux
По [этому ролику](https://www.youtube.com/watch?v=9A3QtGMuqvw)

### Диски
- `df` - информация о занимаемом месте на дисках
  - `-h` - человекочитаемый вид
  - `-i` - Информация об инодах
- `du` - Информация о размере файлов в файле
  - `-s` - в байтах (*?*) 
  - `-h` - человекочитаемый
- `smartctl -a /dev/diskDevice` - отчёт об устройстве
- `/proc/mdstat` - Информация о RAID
- `iostat` - информация о чтении/записи на диски

### Процессы
- `iotop` - какие процессы читают/пишут на диск
- `top` / `htop` - информация о том, как процессы расходуют процессорное время и общая инфа о занятости процессора
- `vmstat` / `free -m` - информация о памяти
- `ps aux` - выводит информацию обо всех процессах

### Сеть
*Если указывается `<address>`, то это может быть как IP, так и доменное имя*:
- `netstat -tulpn` / `ss -lntu` - какие процессы на каких портах взаимодействуют с сетью
- `ip a` / `ifconfig` - действующие сетевые интерфейсы
- `netstat -rn` / `ip r` - маршруты сетевых интерфейсов
- `ping <address>` - классика
- `traceroute <address>` - показывает путь до указанного адреса
  - `mtr <address>` - то же, но в live-режиме
- `dig [@<DNS_address>] <DOMAIN>` - запрос к DNS-серверу
  - `-t <type>` - запрос записи конкретного вида
  - `nslookup` - работает похожим образом
- `curl <address>` - отправить GET-запрос (вроде и POST можно отправлять, но как - хз)
  - `--unix-socket </socket/path> <request>` - использовать сокеты
  - *вообще, функционал очень обширный, тут весь его сейчас не смогу объять*
- `tcpdump port <port>` - посмотреть пакеты, идущие через порт
  - `-i <interface>` - указать конкретный интерфейс (`any` - Любой)
  - `-nn` - не превращать IP обратно в доменные имена

### Логи
Обычно хранятся в каталоге `/var/log/`:
- `/var/log/syslog` - основной лог системы
- `/var/log/auth.log` - логи авторизации и выполнения команд с повышением привилегий
- `/var/log/kern.log` - сообщения от ядра системы

Команды
- `tail <file>` - вывести "хвост" файла
  - `-f` - обновлять в реальном времени
  - `-p50` - вывести 50 последних строк
- `dmesg -T` - также выводит логи ядра
- `journalctl` - выводит логи сервисов (по умолчанию выведет лог системы)
  - `-xeu <service>` - лог конкретного сервиса

## Контроль температуры
По [этой статье](https://losst.pro/izmerenie-temperatury-v-linux#chto-my-budem-ispolzovat)

В целом, меня оттуда интересовала только первая утилита, так что вот для неё процесс установки:
```sh
sudo apt install -y lm-sensors
sudo sensors detect
sudo systemctl enable lm-sensors
```
Теперь можем писать `sensors` и мониторить температуру